function FavoritableProduct(t){this.$variants=t.$variants,this.$productPrice=t.$productPrice,this.productFavoriteButton=t.productFavoriteButton}FavoritableProduct.prototype.initialize=function(){this.bindEvents(),this.modifyDisplay(),this.processParams()},FavoritableProduct.prototype.modifyDisplay=function(){1!=this.$variants.length&&(this.$variants.prop("checked",!1),this.$productPrice.hide())},FavoritableProduct.prototype.processParams=function(){var t=getQueryParams(document.location.search);t.favorite_product_id&&("variant"==t.type?$("#variant_id_"+t.favorite_product_id).click():this.markProductFavorite())},FavoritableProduct.prototype.bindEvents=function(){this.$variants.on("click",this.changeFavoriteOption())},FavoritableProduct.prototype.changeFavoriteOption=function(){var t=this;return function(){t.$productPrice.show(),$.ajax({url:"/favorite_products/"+$(this).val()+"/get_favoritable_value",method:"GET",dataType:"script",data:{type:"Spree::Variant"},success:function(){getQueryParams(document.location.search).favorite_product_id&&t.markProductFavorite()}})}},FavoritableProduct.prototype.markProductFavorite=function(){var t=$(this.productFavoriteButton);t&&(t.attr("data-remote",!0),t.trigger("click"),window.history.pushState({},document.title,window.location.pathname))},$(function(){new FavoritableProduct({$variants:$('input[name="variant_id"]'),$productPrice:$('[data-hook="product_price"]'),productFavoriteButton:"#mark-as-favorite"}).initialize()});